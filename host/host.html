<!doctype html>
<html>
	<head>
		<title>NeKome</title>
		<script src="/socket.io/socket.io.js"></script>
		<script>
			var socket = io();
			var num = 0;
			var rnum = 0;
			socket.on('comment', function(data){
				let dom = document.createElement('div');
				dom.id = num+=1;
				dom.className = "comment";
				dom.textContent = data.value;
				document.getElementById("parent").appendChild(dom);

				var elem = document.getElementById(num);
				var pos = 100;
				var id = setInterval(frame, 50);
				function frame() {
					if (pos == -100) {
						clearInterval(id);
						document.getElementById(`${rnum+=1}`).remove()
					} else {
						pos--; 
						elem.style.left = pos + "%"
					}
				}
			});
		</script>
		<style type="text/css">
			body {
				overflow-x: hidden;
			}
			.comment {
				white-space: nowrap;
				left: 100%;
				position: absolute;
			  animation-timing-function: linear;
			}
		</style>
	</head>
	<body>
		<div id="parent"></div>
	</body>
</html>

